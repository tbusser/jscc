/*
 RequireJS 2.1.14 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/

var requirejs,require,define;!function(ba){function G(e){return"[object Function]"===K.call(e)}function H(e){return"[object Array]"===K.call(e)}function v(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function T(e,t){if(e){var n;for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));n-=1);}}function t(e,t){return fa.call(e,t)}function m(e,n){return t(e,n)&&e[n]}function B(e,n){for(var i in e)if(t(e,i)&&n(e[i],i))break}function U(e,n,i,r){return n&&B(n,function(n,o){!i&&t(e,o)||(!r||"object"!=typeof n||!n||H(n)||G(n)||n instanceof RegExp?e[o]=n:(e[o]||(e[o]={}),U(e[o],n,i,r)))}),e}function u(e,t){return function(){return t.apply(e,arguments)}}function ca(e){throw e}function da(e){if(!e)return e;var t=ba;return v(e.split("."),function(e){t=t[e]}),t}function C(e,t,n,i){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=i,n&&(t.originalError=n),t}function ga(e){function n(e,t,n){var i,r,o,s,a,l,u,c,t=t&&t.split("/"),d=q.map,f=d&&d["*"];if(e){for(e=e.split("/"),r=e.length-1,q.nodeIdCompat&&Q.test(e[r])&&(e[r]=e[r].replace(Q,"")),"."===e[0].charAt(0)&&t&&(r=t.slice(0,t.length-1),e=r.concat(e)),r=e,o=0;o<r.length;o++)s=r[o],"."===s?(r.splice(o,1),o-=1):".."===s&&0!==o&&(1!=o||".."!==r[2])&&".."!==r[o-1]&&0<o&&(r.splice(o-1,2),o-=2);e=e.join("/")}if(n&&d&&(t||f)){r=e.split("/"),o=r.length;e:for(;0<o;o-=1){if(a=r.slice(0,o).join("/"),t)for(s=t.length;0<s;s-=1)if((n=m(d,t.slice(0,s).join("/")))&&(n=m(n,a))){i=n,l=o;break e}!u&&f&&m(f,a)&&(u=m(f,a),c=o)}!i&&u&&(i=u,l=c),i&&(r.splice(0,l,i),e=r.join("/"))}return(i=m(q.pkgs,e))?i:e}function i(e){z&&v(document.getElementsByTagName("script"),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===S.contextName)return t.parentNode.removeChild(t),!0})}function r(e){var t=m(q.paths,e);if(t&&H(t)&&1<t.length)return t.shift(),S.require.undef(e),S.makeRequire(null,{skipMap:!0})([e]),!0}function o(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function s(e,t,i,r){var s,a,l=null,u=t?t.name:null,c=e,d=!0,f="";return e||(d=!1,e="_@r"+(P+=1)),e=o(e),l=e[0],e=e[1],l&&(l=n(l,u,r),a=m(F,l)),e&&(l?f=a&&a.normalize?a.normalize(e,function(e){return n(e,u,r)}):-1===e.indexOf("!")?n(e,u,r):e:(f=n(e,u,r),e=o(f),l=e[0],f=e[1],i=!0,s=S.nameToUrl(f))),i=!l||a||i?"":"_unnormalized"+(V+=1),{prefix:l,name:f,parentMap:t,unnormalized:!!i,url:s,originalName:c,isDefine:d,id:(l?l+"!"+f:f)+i}}function a(e){var t=e.id,n=m(L,t);return n||(n=L[t]=new S.Module(e)),n}function l(e,n,i){var r=e.id,o=m(L,r);!t(F,r)||o&&!o.defineEmitComplete?(o=a(e),o.error&&"error"===n?i(o.error):o.on(n,i)):"defined"===n&&i(F[r])}function c(e,t){var n=e.requireModules,i=!1;t?t(e):(v(n,function(t){(t=m(L,t))&&(t.error=e,t.events.error&&(i=!0,t.emit("error",e)))}),i||g.onError(e))}function d(){R.length&&(ha.apply(O,[O.length,0].concat(R)),R=[])}function f(e){delete L[e],delete A[e]}function p(e,t,n){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,v(e.depMaps,function(i,r){var o=i.id,s=m(L,o);s&&!e.depMatched[r]&&!n[o]&&(m(t,o)?(e.defineDep(r,F[o]),e.check()):p(s,t,n))}),n[i]=!0)}function h(){var e,t,n=(e=1e3*q.waitSeconds)&&S.startTime+e<(new Date).getTime(),o=[],s=[],a=!1,l=!0;if(!_){if(_=!0,B(A,function(e){var u=e.map,c=u.id;if(e.enabled&&(u.isDefine||s.push(e),!e.error))if(!e.inited&&n)r(c)?a=t=!0:(o.push(c),i(c));else if(!e.inited&&e.fetched&&u.isDefine&&(a=!0,!u.prefix))return l=!1}),n&&o.length)return e=C("timeout","Load timeout for modules: "+o,null,o),e.contextName=S.contextName,c(e);l&&v(s,function(e){p(e,{},{})}),n&&!t||!a||!z&&!ea||k||(k=setTimeout(function(){k=0,h()},50)),_=!1}}function b(e){t(F,e[0])||a(s(e[0],null,!0)).init(e[1],e[2])}function y(e){var e=e.currentTarget||e.srcElement,t=S.onScriptLoad;return e.detachEvent&&!Y?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=S.onScriptError,(!e.detachEvent||Y)&&e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function x(){var e;for(d();O.length;){if(e=O.shift(),null===e[0])return c(C("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));b(e)}}var _,w,S,E,k,q={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},L={},A={},j={},O=[],F={},I={},D={},P=1,V=1;return E={require:function(e){return e.require?e.require:e.require=S.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?F[e.map.id]=e.exports:e.exports=F[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return m(q.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},w=function(e){this.events=m(j,e.id)||{},this.map=e,this.shim=m(q.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},w.prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=u(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,S.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();S.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;I[e]||(I[e]=!0,S.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id;t=this.depExports;var i=this.exports,r=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(G(r)){if(this.events.error&&this.map.isDefine||g.onError!==ca)try{i=S.execCb(n,r,t,i)}catch(t){e=t}else i=S.execCb(n,r,t,i);if(this.map.isDefine&&void 0===i&&((t=this.module)?i=t.exports:this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else i=r;this.exports=i,this.map.isDefine&&!this.ignore&&(F[n]=i,g.onResourceLoad)&&g.onResourceLoad(S,this.map,this.depMaps),f(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,i=e.id,r=s(e.prefix);this.depMaps.push(r),l(r,"defined",u(this,function(r){var o,d;d=m(D,this.map.id);var p=this.map.name,h=this.map.parentMap?this.map.parentMap.name:null,b=S.makeRequire(e.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(r.normalize&&(p=r.normalize(p,function(e){return n(e,h,!0)})||""),r=s(e.prefix+"!"+p,this.map.parentMap),l(r,"defined",u(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),(d=m(L,r.id))&&(this.depMaps.push(r),this.events.error&&d.on("error",u(this,function(e){this.emit("error",e)})),d.enable())):d?(this.map.url=S.nameToUrl(d),this.load()):(o=u(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),o.error=u(this,function(e){this.inited=!0,this.error=e,e.requireModules=[i],B(L,function(e){0===e.map.id.indexOf(i+"_unnormalized")&&f(e.map.id)}),c(e)}),o.fromText=u(this,function(n,r){var l=e.name,u=s(l),d=M;r&&(n=r),d&&(M=!1),a(u),t(q.config,i)&&(q.config[l]=q.config[i]);try{g.exec(n)}catch(e){return c(C("fromtexteval","fromText eval for "+i+" failed: "+e,e,[i]))}d&&(M=!0),this.depMaps.push(u),S.completeLoad(l),b([l],o)}),r.load(e.name,b,o,q))})),S.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){A[this.map.id]=this,this.enabling=this.enabled=!0,v(this.depMaps,u(this,function(e,n){var i,r;if("string"==typeof e){if(e=s(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[n]=e,i=m(E,e.id))return void(this.depExports[n]=i(this));this.depCount+=1,l(e,"defined",u(this,function(e){this.defineDep(n,e),this.check()})),this.errback&&l(e,"error",u(this,this.errback))}i=e.id,r=L[i],!t(E,i)&&r&&!r.enabled&&S.enable(e,this)})),B(this.pluginMaps,u(this,function(e){var t=m(L,e.id);t&&!t.enabled&&S.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){v(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},S={config:q,contextName:e,registry:L,defined:F,urlFetched:I,defQueue:O,Module:w,makeModuleMap:s,nextTick:g.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=q.shim,n={paths:!0,bundles:!0,config:!0,map:!0};B(e,function(e,t){n[t]?(q[t]||(q[t]={}),U(q[t],e,!0,!0)):q[t]=e}),e.bundles&&B(e.bundles,function(e,t){v(e,function(e){e!==t&&(D[e]=t)})}),e.shim&&(B(e.shim,function(e,n){H(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=S.makeShimExports(e)),t[n]=e}),q.shim=t),e.packages&&v(e.packages,function(e){var t,e="string"==typeof e?{name:e}:e;t=e.name,e.location&&(q.paths[t]=e.location),q.pkgs[t]=e.name+"/"+(e.main||"main").replace(ia,"").replace(Q,"")}),B(L,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=s(t))}),(e.deps||e.callback)&&S.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(ba,arguments)),t||e.exports&&da(e.exports)}},makeRequire:function(r,o){function l(n,i,u){var d,f;return o.enableBuildCallback&&i&&G(i)&&(i.__requireJsBuild=!0),"string"==typeof n?G(i)?c(C("requireargs","Invalid require call"),u):r&&t(E,n)?E[n](L[r.id]):g.get?g.get(S,n,r,l):(d=s(n,r,!1,!0),d=d.id,t(F,d)?F[d]:c(C("notloaded",'Module name "'+d+'" has not been loaded yet for context: '+e+(r?"":". Use require([])")))):(x(),S.nextTick(function(){x(),f=a(s(null,r)),f.skipMap=o.skipMap,f.init(n,i,u,{enabled:!0}),h()}),l)}return o=o||{},U(l,{isBrowser:z,toUrl:function(e){var t,i=e.lastIndexOf("."),o=e.split("/")[0];return-1!==i&&("."!==o&&".."!==o||1<i)&&(t=e.substring(i,e.length),e=e.substring(0,i)),S.nameToUrl(n(e,r&&r.id,!0),t,!0)},defined:function(e){return t(F,s(e,r,!1,!0).id)},specified:function(e){return e=s(e,r,!1,!0).id,t(F,e)||t(L,e)}}),r||(l.undef=function(e){d();var t=s(e,r,!0),n=m(L,e);i(e),delete F[e],delete I[t.url],delete j[e],T(O,function(t,n){t[0]===e&&O.splice(n,1)}),n&&(n.events.defined&&(j[e]=n.events),f(e))}),l},enable:function(e){m(L,e.id)&&a(e).enable()},completeLoad:function(e){var n,i,o=m(q.shim,e)||{},s=o.exports;for(d();O.length;){if(i=O.shift(),null===i[0]){if(i[0]=e,n)break;n=!0}else i[0]===e&&(n=!0);b(i)}if(i=m(L,e),!n&&!t(F,e)&&i&&!i.inited){if(q.enforceDefine&&(!s||!da(s)))return r(e)?void 0:c(C("nodefine","No define call for "+e,null,[e]));b([e,o.deps||[],o.exportsFn])}h()},nameToUrl:function(e,t,n){var i,r,o;if((i=m(q.pkgs,e))&&(e=i),i=m(D,e))return S.nameToUrl(i,t,n);if(g.jsExtRegExp.test(e))i=e+(t||"");else{for(i=q.paths,e=e.split("/"),r=e.length;0<r;r-=1)if(o=e.slice(0,r).join("/"),o=m(i,o)){H(o)&&(o=o[0]),e.splice(0,r,o);break}i=e.join("/"),i+=t||(/^data\:|\?/.test(i)||n?"":".js"),i=("/"===i.charAt(0)||i.match(/^[\w\+\.\-]+:/)?"":q.baseUrl)+i}return q.urlArgs?i+((-1===i.indexOf("?")?"?":"&")+q.urlArgs):i},load:function(e,t){g.load(S,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){("load"===e.type||ja.test((e.currentTarget||e.srcElement).readyState))&&(N=null,e=y(e),S.completeLoad(e.id))},onScriptError:function(e){var t=y(e);if(!r(t.id))return c(C("scripterror","Script error for: "+t.id,e,[t.id]))}},S.require=S.makeRequire(),S}var g,x,y,D,I,E,N,J,s,O,ka=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,la=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ia=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,ha=Array.prototype.splice,z=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),ea=!z&&"undefined"!=typeof importScripts,ja=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},q={},R=[],M=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(G(requirejs))return;q=requirejs,requirejs=void 0}"undefined"!=typeof require&&!G(require)&&(q=require,require=void 0),g=requirejs=function(e,t,n,i){var r,o="_";return!H(e)&&"string"!=typeof e&&(r=e,H(t)?(e=t,t=n,n=i):e=[]),r&&r.context&&(o=r.context),(i=m(F,o))||(i=F[o]=g.s.newContext(o)),r&&i.configure(r),i.require(e,t,n)},g.config=function(e){return g(e)},g.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=g),g.version="2.1.14",g.jsExtRegExp=/^\/|:|\?|\.js$/,g.isBrowser=z,x=g.s={contexts:F,newContext:ga},g({}),v(["toUrl","undef","defined","specified"],function(e){g[e]=function(){var t=F._;return t.require[e].apply(t,arguments)}}),z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(y=x.head=D.parentNode),g.onError=ca,g.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},g.load=function(e,t,n){var i=e&&e.config||{};if(z)return i=g.createNode(i,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&0>i.attachEvent.toString().indexOf("[native code")||Y?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(M=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,J=i,D?y.insertBefore(i,D):y.appendChild(i),J=null,i;if(ea)try{importScripts(n),e.completeLoad(t)}catch(i){e.onError(C("importscripts","importScripts failed for "+t+" at "+n,i,[t]))}},z&&!q.skipDataMain&&T(document.getElementsByTagName("script"),function(e){if(y||(y=e.parentNode),I=e.getAttribute("data-main"))return s=I,q.baseUrl||(E=s.split("/"),s=E.pop(),O=E.length?E.join("/")+"/":"./",q.baseUrl=O),s=s.replace(Q,""),g.jsExtRegExp.test(s)&&(s=I),q.deps=q.deps?q.deps.concat(s):[s],!0}),define=function(e,t,n){var i,r;"string"!=typeof e&&(n=t,t=e,e=null),H(t)||(n=t,t=null),!t&&G(n)&&(t=[],n.length&&(n.toString().replace(ka,"").replace(la,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),M&&((i=J)||(N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),function(e){if("interactive"===e.readyState)return N=e}),i=N),i&&(e||(e=i.getAttribute("data-requiremodule")),r=F[i.getAttribute("data-requirecontext")])),(r?r.defQueue:R).push([e,t,n])},define.amd={jQuery:!0},g.exec=function(b){return eval(b)},g(q)}}(this),define("requireLib",function(){}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("Intermediary",[],t):"object"==typeof exports?module.exports=t():e.Intermediary=t()}(this,function(){"use strict";function e(t){for(var n in t._channels)t._channels.hasOwnProperty(n)&&(e(t._channels[n]),delete t._channels[n]);t.removeSubscriber()}function t(e,t){if(null==e||""===e)return null;for(var n=s,i=e.split(":"),r=0,o=i.length;r<o&&null!=n;){if(n.hasChannel(i[r]))n=n.returnChannel(i[r]);else{if(t)break;n=n.addChannel(i[r])}r++}return""===n.namespace?null:n}function n(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function i(e,t){return e.options.priority>t.options.priority?-1:e.options.priority<t.options.priority?1:0}function r(e,t,i){this.id=n(),this.callback=e,this.context=t,this.options=i,this.channel=null}function o(e,t,n){this.namespace=e||"",this.id=n,this._subscribers=[],this._channels={},this._parent=t,this._stopped=!1}o.prototype={addChannel:function(e){var t=(""===this.namespace?"":this.namespace+":")+e,n=new o(t,this,e);return this._channels[e]=n,n},addSubscriber:function(e,t,n){null==n&&(n={}),null==n.priority?n.priority=0:n.priority=0|n.priority;var o=new r(e,t,n);return o.channel=this,this._subscribers.push(o),this._subscribers.sort(i),o},autoRemoveChannel:function(){if(0===this._subscribers.length){for(var e in this._channels)if(this._channels.hasOwnProperty(e))return;null!=this._parent&&this._parent.removeChannel(this.id)}},hasChannel:function(e){return this._channels.hasOwnProperty(e)},publish:function(e){for(var t=0,n=this._subscribers.length,i=n;t<n;){var r=!1,o=this._subscribers[t],s=o.options;r=null==s||null==s.predicate||s.predicate.apply(o.context,e),r&&(null!=s&&null!=s.calls&&(s.calls--,s.calls<1&&this.removeSubscriber(o.id)),o.callback.apply(o.context,e),this._subscribers.length!=i&&(t-=i-this._subscribers.length,i=n=this._subscribers.length)),t++}null!=this._parent&&this._parent.publish(e)},removeChannel:function(e){this.hasChannel(e)&&(this._channels[e]=null,delete this._channels[e],this.autoRemoveChannel())},removeSubscriber:function(e){var t=!1,n=0,i=0;if(null==e){for(n=0,i=this._subscribers.length;n<i;n++)this._subscribers[n].channel=null;this._subscribers=[],t=!0}else for(n=this._subscribers.length-1;n>=0&&!t;)this._subscribers[n].id===e&&(this._subscribers[n].channel=null,t=!0,this._subscribers.splice(n,1)),n--;return this.autoRemoveChannel(),t},returnChannel:function(e){return this._channels[e]},returnSubscriber:function(e){for(var t,n=this._subscribers.length-1;n>=0&&null==t;)this._subscribers[n].id===e&&(t=this._subscribers[n]),n--;return t},setSubscriberPriority:function(e,t){var n=this.returnSubscriber(e);return null!=n&&(n.options.priority=0|t,this._subscribers.sort(i),!0)}};var s=new o("");return{getSubscriber:function(e,n){var i=t(e,!0);return null==i||i.namespace!==e?null:i.returnSubscriber(n)},once:function(e,t,n,i){return i=i||{},i.calls=1,this.subscribe(e,t,n,i)},publish:function(e){var n=t(e,!0);if(null==n)return null;var i=Array.prototype.slice.call(arguments,1);return 0===i.length&&i.push(null),i.push(e),n.publish(i),!0},reset:function(){e(s)},setSubscriberPriority:function(e,n,i){var r=t(e,!0);return null==r||r.namespace!=e?null:r.setSubscriberPriority(n,i)},subscribe:function(e,n,i,r){var o=t(e,!1);return null==o||o.namespace!=e?null:(i=i||{},r=r||{},o.addSubscriber(n,i,r).id)},unsubscribe:function(e,n){var i=t(e,!0);return null==i||i.namespace!==e?null:i.removeSubscriber(n)}}}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("CodeInput",["Intermediary"],t):"object"==typeof exports?module.exports=t(require("Intermediary")):e.CodeInput=t(e.Intermediary)}(this,function(e){"use strict";function t(){var t=h.querySelector("textarea");return null!=t&&(""===t.value?(e.publish("notification:info",{level:1,message:"There is no text in the textarea"}),!1):(p("textarea"),d(t.value),!0))}function n(t){e.publish("notification:info",{level:9,message:'Starting download of "'+t.name+'"'}),b=new FileReader,b.onerror=u,b.onload=c,b.readAsText(t)}function i(e){var t=/javascript/i;if(e.target.files.length>0){var i=e.target.files[0];f(t.test(i.type)?i:null),v&&n(g)}v=!1}function r(i){if(e.publish("notification:clear",{}),null==g){if(!t()){var r=h.querySelector('input[type="file"]');null!=r&&(v=!0,r.click())}}else n(g)}function o(e){var t=e.dataTransfer,n=!1;n=t.types.indexOf?t.types.indexOf("Files")!==-1:t.types.contains("Files"),n&&e.target.classList.add("on-drag")}function s(e){e.target.classList.remove("on-drag")}function a(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"}function l(e){e.preventDefault(),e.stopPropagation(),e.target.classList.remove("on-drag");var t=e.dataTransfer.files[0];f(/javascript/gi.test(t.type)?t:null)}function u(t){var n;switch(t.target.error.name){case"NotFoundError":n="File not found";break;case"NotReadableError":n="Unable to read file";break;case"AbortError":n="File read aborted";break;default:n="An error occured reading the file"}e.publish("notification:error",{level:1,message:n})}function c(t){e.publish("notification:info",{level:9,message:"File downloaded"});var n=b.result;p("file"),d(n)}function d(t){e.publish("codeinput:ready",{jsCode:t})}function f(e){var t=h.querySelector(".drop-target");g=e,null!=t&&(null==g?t.textContent="Selected file does not appear to be a javascript file. Click to select another file or try dropping another file.":t.textContent='"'+g.name+'" selected. Click to select another file or try dropping another file.')}function p(e){null!=window.ga&&ga("send","event","code-input","code-submit",e)}var h,m,g,b,v=!1,y=function(e,t){h=e,m=t};return y.prototype={init:function(){if(null!=h){if(null==window.FileReader){var e=document.getElementById("file-selector");return void(null!=e&&(e.parentNode.removeChild(e),e=null))}var t=h.querySelector(".drop-target");null!=t&&(t.addEventListener("dragenter",o),t.addEventListener("dragleave",s),t.addEventListener("dragover",a),t.addEventListener("drop",l)),t=h.querySelector('input[type="file"]'),null!=t&&t.addEventListener("change",i),t=h.querySelector('button[type="button"]'),t&&t.addEventListener("click",r)}}},y}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("DataStore",["Intermediary"],t):"object"==typeof exports?module.exports=t(require("Intermediary")):e.DataStore=t(e.Intermediary)}(this,function(e){"use strict";function t(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function n(e){for(var t=0,n=0,i=e.length;n<i;n++)t+=e[n].globalUsage;return t}function i(e){return t(e,function(t,n){for(var i={},r=0,o=n.version_list.length;r<o;r++){var s=n.version_list[r];null!=s.prefix&&""!==s.prefix||(s.prefix=n.prefix),i[n.version_list[r].version]=n.version_list[r]}e[t].version_list=i}),e}function r(e,t,n){var i={};return i.versions=[],i.fromVersion=e.version,i.versions.push(o(e,t,n)),i.support=e.support.substr(0,1).toLowerCase(),i.isMobileBrowser=t.isMobileBrowser,i}function o(e,t,n){var i,r=/d/i,o=/x/i,s=!1,a=e.support.match(/#(\d+)/),l=isNaN(t.global_usage)?0:t.global_usage;return o.test(e.support)&&(s=t.prefix),a&&a.length>=2&&(i="#note_"+n+"_"+a[1]),{disabled:r.test(e.support),era:t.era,globalUsage:l,needsPrefix:s,note:i,version:e.version}}function s(e){return null==e?null:(e=e.replace(/\[(.*?)]\((.*?)\)/g,function(e,t,n){return'<a href="'+n+'">'+t+"</a>"}),e=e.replace(/`(.*?)`/g,function(e,t){return'<code class="inline-code">'+t+"</code>"}))}function a(e,t){var n,i,r;if(null!=t&&0!==t.length){if(n={},null==e)e=[];else for(i=0,r=e.length;i<r;i++)n[e.url]=!0;for(i=0,r=t.length;i<r;i++)"poly"===t[i].type&&null==n[t[i].url]&&(n[t[i].url]=!0,e.push(t[i]))}}function l(e,n){var i={};return t(n,function(n,r){i[n]={},t(r.version_list,function(t,r){void 0===e[n]||void 0===e[n][t]?i[n][t]="y":i[n][t]=e[n][t]})}),i}function u(){t(b,function(e,i){t(i.stats,function(t,s){for(var a,l,u=[],c=0,d=s.length;c<d;c++){var f=s[c],p=/(?:a|n|p|u|y)/i,h=p.exec(f.support),m=h.length>0?h[0].toLowerCase():"u",b=g[t].version_list[f.version];null!=b&&(b.isMobileBrowser="mobile"===g[t].type,null==a?a=r(f,b,e):m!==a.support?(a.toVersion=l.version,a.totalGlobalUsage=n(a.versions),u.push(a),a=r(f,b,e)):a.versions.push(o(f,b,e)),l=f)}a.totalGlobalUsage=n(a.versions),a.toVersion=l.version,u.push(a),i.stats[t]=u})})}function c(){b={},v=0,g=i(y["/data/caniuse2.json"].agents),m(y["/data/caniuse2.json"].data),h(y["/data/additional.json"].data),u(),d()}function d(){var e=/poly(?:fill)/i,n=/code.google.com/i;t(b,function(t,i){if(null!=i.links&&i.links.length>0){for(var r=[],o=0,s=i.links.length;o<s;o++){var a=i.links[o];null!=a.type?"poly"===a.type&&r.push(a):(e.test(a.title)||n.test(a.url))&&r.push(a)}i.links=r}})}function f(e,n,i){var r=document.createElement("ol");if(t(i,function(t,n){var i=document.createElement("li");i.innerHTML=s(n),i.setAttribute("id","note_"+e+"_"+t),r.appendChild(i)}),0===r.children.length&&""===n)return null;var o=document.createElement("section"),a=document.createElement("h4");if(a.textContent="Notes",o.appendChild(a),""!==n)for(var l=n.match(/(^(.*?)(?:\n|\r))|((?:\n|\r)(.*?)(?:\n|\r)|(?:\n|\r)(.*?)$|^(.*?)$)/g),u=0,c=l.length;u<c;u++)if(null!=l[u]&&""!==l[u]&&0!==l[u].replace(/\s/g,"").length){var d=document.createElement("p");d.innerHTML=s(l[u]),o.appendChild(d)}return r.children.length>0&&o.appendChild(r),o.innerHTML}function p(e,n){var i={};return null!=n&&(e.stats=l(e.stats,n)),t(e.stats,function(e,n){var r=[];t(n,function(e,t){r.push({version:e,support:t})}),r.sort(function(e,t){return e=parseFloat(e.version),t=parseFloat(t.version),e<t?-1:e>t?1:0}),i[e]=r}),i}function h(e){t(e,function(e,t){null!=_[e]&&(null!=b[e]?a(b[e].links,t.links):(v++,b[e]=t,b[e].key=e,b[e].notes=f(e,t.notes,t.notes_by_num),b[e].stats=p(b[e],g),b[e].tests=_[e]))})}function m(e){t(e,function(e,t){(t.categories.indexOf("JS API")>-1||t.categories.indexOf("DOM")>-1||t.categories.indexOf("Canvas")>-1)&&null!=_[e]&&(v++,b[e]=t,b[e].key=e,b[e].notes=f(e,t.notes,t.notes_by_num),b[e].stats=p(b[e]),b[e].tests=_[e])})}var g,b,v,y,x=!1,_={queryselector:[/\.querySelector\s*(?:All)*\(/],getelementsbyclassname:[/\.getElementsByClassName\s*\(/],webworkers:[/new\s*Worker\s*\(/],hashchange:[/(\.onhashchange\s*=|\.addEventListener\s*\(\s*(\'|")hashchange(\'|"))/],sharedworkers:[/new\s*SharedWorker\s*\(/],canvas:[/\.getContext\s*\(\s*(?:\'|")2d(?:\'|")\s*\)/],"canvas-text":[/\.(?:strokeText\s*\(|fillText\s*\(|measureText\s*\()/],"namevalue-storage":[/(?:localStorage|sessionStorage)\./],"sql-storage":[/=\s(?:.*?)openDatabase\s*\(/],indexeddb:[/=\s(?:.*?)indexedDB/],eventsource:[/=\s*new\s*EventSource\s*\(/],"x-doc-messaging":[/(\.addEventListener\s*\(\s*(?:\'|")message(?:\'|")|\.postMessage\s*\()/],geolocation:[/navigator\.geolocation/],webgl:[/=\s*initWebGL\(/],shadowdom:[/\.createShadowRoot\s*\(\s*\)/],websockets:[/=\s*new\s*WebSocket\s*\(\s*\)/],"script-async":[/<\s*script\s*.*async.*?>/],cors:[/\.withCredentials\s*=\s*(\'|")?true(\'|")?/],json:[/JSON\.(?:parse|stringify)\s*\(/],classlist:[/\.classList\.(remove|add|toggle|contains)\s*\(/],notifications:[/=\s*new\s*Notification\s*\(/],stream:[/\.getUserMedia\s*\(/],touch:[/\.addEventListener\s*\(\s*(?:\'|")touch(?:start|end|move|cancel)(?:\'|")/],matchesselector:[/\.matches(Selector)?\s*\(\s*(?:\'|").*?\s*(?:\'|")\s*\)/],blobbuilder:[/(window\.(?:Moz|WebKit)?BlobBuilder|=\s*new\s*Blob\()/],createObjectURL:[/\.createObjectURL\s*\(/],rellist:[/\.relList/],typedarrays:[/=\s*new\s*((?:(?:Ui|I)nt)|Float)(?:8|16|32|64)?(?:Clamped)?Array\s*\(/],deviceorientation:[/\.DeviceOrientationEvent\s*\)|\.addEventListener\s*\(\s*(\'|")deviceorientation(\'|")\s*,/],"script-defer":[/<\s*script\s*.*defer.*?>/],"nav-timing":[/performance\.(?:timing|navigation)/],"audio-api":[/\.(?:AudioContext|webkitAudioContext)/],fullscreen:[/(?:ms|moz|webkit)?(?:r|R)equestFull(?:S|s)creen\s*\(.*?\)/],requestanimationframe:[/\.(?:webkit|moz)?(?:r|R)equestAnimationFrame/],matchmedia:[/\.matchMedia\s*\(/],getcomputedstyle:[/\.getComputedStyle\s*\(/],pagevisibility:[/(?:\'|")(?:moz|ms|webkit)?visibilitychange(?:\'|")/],pointer:[/(?:\.pointerType|\.pointerEnabled|pointer(?:down|up|cancel|move|over|out|enter|leave)|(?:got|lost)pointercapture)/],cryptography:[/\.(?:ms)?(?:c|C)rypto(?:\.subtle)?/],template:[/\.content(?:\s*(?:;|\,|\))|\.)/,/\.importNode\s*/],"channel-messaging":[/=\s*new\s*MessageChannel\s*\(\s*\)/],mutationobserver:[/=\s*new\s*MutationObserver\s*\(/],"canvas-blending":[/\.globalCompositeOperation\s*=/],clipboard:[/new\s*ClipboardEvent\s*\(|\.addEventListener\s*\(\s*(?:\'|")(before)?(?:copy|cut|paste)(?:\'|")/],rtcpeerconnection:[/\.(?:moz|webkit)?RTCPeerConnection/],vibration:[/\.vibrate\s*\(/],"web-speech":[/=\s*new\s*(?:webkit)SpeechRecognition\s*\(\s*\)/],"high-resolution-time":[/performance\.now\s*\(\s*\)/],"battery-status":[/\.(?:mozB|webkitB|b)?attery(?:\s*)(?:;)?/],"speech-synthesis":[/=\s*new\s*SpeechSynthesisUtterance\s*\(\s*\)/],"user-timing":[/performance\.(?:mark|clearMarks|measure|clearMeasure)\s*\(/],"ambient-light":[/\.addEventListener\s*\(\s*(?:\'|")devicelight(?:\'|")\s*,/],domcontentloaded:[/\.addEventListener\s*\(\s*(?:\'|")DOMContentLoaded(?:\'|")\s*,/],proximity:[/\.addEventListener\s*\(\s*(?:\'|")deviceproximity(?:\'|")\s*,/],gamepad:[/\.(?:webkitG|g)?etGamepads\s*\(\s*\)/],"font-loading":[/(?:\.fonts.(?:add|load|ready)\s*\(|new\s*FontFace\s*\()/],"screen-orientation":[/\.addEventListener\s*\(\s*(?:\'|")(?:moz|webkit|ms)?orientationchange(?:\'|")/],getrandomvalues:[/\.(?:ms)?(?:c|C)rypto.getRandomValues\s*\(/],"css-supports-api":[/CSS.supports\s*\(/],"atob-btoa":[/\.(?:atob|btoa)\s*\(/],imports:[/\.querySelector(?:All)?\s*\((?:\'|")link\[rel=(?:\'|")import(?:\'|")](?:\'|")/],"resource-timing":[/\.getEntriesByType\s*\(\s*(?:\'|")resource(?:\'|")\s*\)/],"web-animation":[/\S*\.animate\s*\(\s*(?:(?:\[(?:\s|\n|\r|\S|)*?\]|\S*)\s*,)(?:\s|\S|\r|\n)*?\)/],"custom-elements":[/(?:\S*?)\.registerElement\s*\(\s*(?:\'|")\S*?(?:\'|")/],filereader:[/=\s*new\s*FileReader\s*\(\s*\)/],filesystem:[/\.(?:r|webkitR)equestFileSystem/],fileapi:[/(?:\.dataTransfer|\.files(?:\[\d*?]|\.item|\.length|\s*;))/],promises:[/new\s*Promise\s*\(/],xhr2:[/(?:=\s*new\s*FormData\s*\()|(?:\.responseType\s*=\s*(?:\'|")(?:arraybuffer|blob|document|json|text)(?:\'|"))/],"obj-create":[/Object\.create\s*\(/],"obj-defineproperty":[/Object\.defineProperty\s*\(/],"obj-defineproperties":[/Object\.defineProperties\s*\(/],"obj-getprototypeof":[/Object\.getPrototypeOf\s*\(/],"obj-keys":[/Object\.keys\s*\(/],"obj-seal":[/Object\.seal\s*\(/],"obj-freeze":[/Object\.freeze\s*\(/],"obj-preventextensions":[/Object\.preventExtensions\s*\(/],"obj-issealed":[/Object\.isSealed\s*\(/],"obj-isfrozen":[/Object\.isFrozen\s*\(/],"obj-isextensible":[/Object\.isExtensible\s*\(/],"obj-getownpropertydesc":[/Object\.getOwnPropertyDescriptor\s*\(/],"obj-getownpropertynames":[/Object\.getOwnPropertyNames\s*\(/],"date-toisostring":[/\.toISOString\s(\(\s*)/],"date-now":[/Date\.now\s*\(\s*\)/],"array-isarray":[/Array\.isArray\s*\(/],"function-bind":[/\.bind\s*\(/],"string-trim":[/\.trim\s*\(\s*\)/],"array-indexof":[/\.indexOf\s*\(.*?(?:,.*?)?\s*\)/],"array-lastindexof":[/\.lastIndexOf\s*\(.*?(?:,.*?)?\s*\)/],"array-every":[/\.every\s*\(\s*(?:function|\S*?(?:,\s*\S*?)?\s*\))/],"array-some":[/\.some\s*\(\s*(?:function|\S*?(?:,\s*\S*?)?\s*\))/],"array-foreach":[/\.forEach\s*\(\s*(?:function|\S*?(?:,\s*\S*?)?\s*\))/],"array-map":[/\.map\s*\(\s*(?:function|\S*?(?:,\s*\S*?)?\s*\))/],"array-filter":[/\.filter\s*\(\s*(?:function|\S*?(?:,\s*\S*?)?\s*\))/],"array-reduce":[/\.reduce\s*\(\s*(?:function|\S*?(?:,\s*\S*?)?\s*\))/],"array-reduceRight":[/\.reduceRight\s*\(\s*(?:function|\S*?(?:,\s*\S*?)?\s*\))/],"strict-mode":[/(?:\'|")use strict(?:\'|")/],eventtarget:[/\.(?:addEventListener|removeEventListener|dispatchEvent)/],let:[/(?:\s+|^)let\s+/],const:[/(?:\s+|^)const\s+/]};return{getAgents:function(){return g},getCategoryCount:function(){return v},getData:function(){return b},isReady:function(){return x},init:function(e){y=e,c(),x=!0}}}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("CodeAnalyzer",["DataStore","Intermediary"],t):"object"==typeof exports?module.exports=t(require("DataStore"),require("Intermediary")):e.CodeAnalyzer=t(e.DataStore,e.Intermediary)}(this,function(e,t){"use strict";function n(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function i(i){var o=r(i),s=e.getData(),a=[];return t.publish("notification:completed",{level:9,message:"Testing "+e.getCategoryCount()+" features"}),n(s,function(e,n){for(var i,r=0,s=n.tests.length;r<s&&(i=n.tests[r].test(o),i);r++);i&&(a.push(n),t.publish("notification:info",{level:1,message:"Detected the usage of "+n.title+" ("+e+")"}))}),a}function r(e){return e.replace(/(?:\/\*(?:[\s\S]*?)\*\/)|(?:([\s;])+\/\/(?:.*)$)/gm,"")}var o=function(e){this._options=e,this._code=null,this._fileName=null,this._matches=[]};return o.prototype={check:function(n,r){this._code=n,this._fileName=r,e.isReady()?(this._matches=i(n),t.publish("codeAnalyzed",{
sender:this})):t.publish("notification:error",{level:1,message:"Make sure compatibility data is loaded before running the CodeAnalyzer"})},getFileName:function(){return this._fileName},getMatches:function(){return this._matches}},o}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("Reporter",[],t):"object"==typeof exports?module.exports=t():e.Reporter=t()}(this,function(){"use strict";function e(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function t(t){var n={};return e(p.options,function(e,t){n[e]=t}),e(t,function(e,t){void 0!==n[e]&&(n[e]=t)}),n}function n(t){var n=[];return e(t,function(e,t){n.push({key:e,title:t.browser.toLowerCase()})}),n.sort(function(e,t){return e.title<t.title?-1:e.title>t.title?1:0}),n}function i(e,t,n){var i=document.createElement("a"),r=document.createElement("li");i.appendChild(document.createTextNode(e)),i.setAttribute("href","#"+t),r.appendChild(i),n.appendChild(r)}function r(e,t){var n={},i=function(t){var n=document.createElement("a"),i=document.createElement("sup"),r=/\d+/,o=r.exec(t);n.setAttribute("href",t),n.setAttribute("title","Go to note "+o),n.appendChild(document.createTextNode(o)),i.appendChild(n),e.appendChild(i)};if(null!=t)if(Array.isArray(t))for(var r=0,o=t.length;r<o;r++){var s=t[r];null!=s.note&&null==n[s.note]&&(n[s.note]=!0,i(s.note))}else"object"==typeof t?null!=t.note&&i(t.note):"string"==typeof t&&i(t)}function o(t,n){e(t,function(e,t){for(var i=document.querySelectorAll("["+n+'="'+e+'"]'),r=0,o=i.length;r<o;r++)t?i[r].classList.remove("hidden"):i[r].classList.add("hidden")})}function s(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function a(e){var t=document.createElement("section"),n=document.createElement("h3"),i=document.createElement("p");if(""!==e.spec){var r=document.createElement("a");r.textContent=e.title,r.setAttribute("title","Go to specification"),r.setAttribute("href",e.spec),n.appendChild(r)}else n.textContent=e.title;return i.textContent=e.description,t.classList.add("report-section"),t.setAttribute("id",e.key),t.appendChild(n),t.appendChild(i),t}function l(e){var t=document.createElement("section"),n=document.createElement("ol"),i=document.createElement("h4");switch(t.classList.add("support-section"),e){case"n":i.appendChild(document.createTextNode("No support"));break;case"y":i.appendChild(document.createTextNode("Full support"));break;case"p":i.appendChild(document.createTextNode("Support through polyfill"));break;case"u":i.appendChild(document.createTextNode("Unknown support"));break;case"a":i.appendChild(document.createTextNode("Partial support"));break;default:i.appendChild(document.createTextNode("SUPPORT VALUE:"+e))}return t.setAttribute("data-support",e),t.appendChild(i),t.appendChild(n),{section:t,list:n,count:0,usage:0}}function u(e,t,n,i,o,s,a){var l,u,c,d,f=a[n],p=function(e,t){e.disabled&&(t.classList.add("disabled"),t.setAttribute("data-title","Feature disabled by default, needs to be enabled through a flag or similar action")),e.needsPrefix&&(t.classList.add("prefix"),t.setAttribute("data-title",'The prefix "'+e.needsPrefix+'" is required to use this feature'))};if(s){for(l=document.createElement("li"),o.fromVersion===o.toVersion?l.appendChild(document.createTextNode(i+" "+o.fromVersion)):l.appendChild(document.createTextNode(i+" "+o.fromVersion+" to "+o.toVersion)),l.setAttribute("data-browser",n),f||l.classList.add("hidden"),r(l,o.versions),o.isMobileBrowser&&l.classList.add("mobile-browser"),u=0,c=o.versions.length;u<c;u++)p(o.versions[u],l);t.appendChild(l)}else for(u=0,c=o.versions.length;u<c;u++)d=o.versions[u],l=document.createElement("li"),l.appendChild(document.createTextNode(i+" "+d.version)),null!=d.note&&r(l,d.note),o.isMobileBrowser&&l.classList.add("mobile-browser"),p(d,l),l.setAttribute("data-browser",n),f||l.classList.add("hidden"),t.appendChild(l)}function c(e){var t;if(null!=e)return t=document.createElement("section"),t.classList.add("report-notes"),t.innerHTML=e,t}function d(e){var t=document.createElement("section"),n=document.createElement("h3"),i=document.createElement("p");n.textContent="Congrats!",i.textContent="The code you provided did not contain anything that might give compatibility problems. Yeey! (or perhaps there is but went undetected, don't you feel better now?)",t.appendChild(n),t.appendChild(i),e.appendChild(t)}function f(e,t){for(var n=document.createElement("section"),i=document.createElement("h4"),r=document.createElement("ul"),o=/^http(?:s)?:\/\/(\S*?)\//,s=0,a=e.length;s<a;s++){var l=document.createElement("a"),u=document.createElement("li");l.appendChild(document.createTextNode(e[s].title)),l.setAttribute("href",e[s].url),u.appendChild(l),u.appendChild(document.createTextNode("["+e[s].url.match(o)[1]+"]")),r.appendChild(u)}1===e.length?i.appendChild(document.createTextNode("Polyfill script:")):i.appendChild(document.createTextNode("Polyfill scripts:")),n.appendChild(i),n.classList.add("polyfills"),n.appendChild(r),t.appendChild(n)}var p=function(e,i,r){this._element=e,this._options=t(i),this._agents=r,this._agentsArray=n(r),this._index=document.getElementById("index-list")};return p.options={groupVersions:!0,showFullySupported:!0,supportOrder:["u","n","p","a","x","d","y"]},p.prototype={_renderCategoryExt:function(e,t){var n,r,o,s=a(e),d={},p=this._agents,h=this._options;for(i(e.title,e.key,this._index),r=0,o=this._agentsArray.length;r<o;r++)for(var m=this._agentsArray[r].key,g=e.stats[m],b=0,v=g.length;b<v;b++){var y=g[b],x=y.support.substr(0,1).toLowerCase();null==d[x]&&(d[x]=l(x));var _=d[x].list;u(e.key,_,m,p[m].browser,y,h.groupVersions,t),d[x].usage+=y.totalGlobalUsage}for(r=0,o=this._options.supportOrder.length;r<o;r++){var w=this._options.supportOrder[r];if(null!=d[w]){var C=d[w].section.querySelector("h4");null!=C&&C.appendChild(document.createTextNode(" ("+d[w].usage.toFixed(1)+"% global browser share)")),s.appendChild(d[w].section)}}null!=d.p&&null!=e.links&&e.links.length>0&&f(e.links,s),null!=e.notes&&(n=c(e.notes),s.appendChild(n)),this._element.appendChild(s)},buildReport:function(e,t){if(null!=this._element){s(this._element),null!=this._index&&s(this._index),null!=e&&0!==e.length||d(this._element),e=e.sort(function(e,t){return e.title.toLowerCase()<t.title.toLowerCase()?-1:e.title.toLowerCase()>t.title.toLowerCase()?1:0});for(var n=0,i=e.length;n<i;n++){var r=e[n];this._renderCategoryExt(r,t)}}},filterBrowsers:function(e){o(e,"data-browser")},filterSupportSections:function(e){o(e,"data-support")}},p}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("LocalStorage",[],t):"object"==typeof exports?module.exports=t():e.LocalStorage=t()}(this,function(){"use strict";function e(e){try{return JSON.parse(e)}catch(t){return e}}function t(e){return JSON.stringify(e)}var n=function(){this._enabled=!0,this.testAvailability(),Object.defineProperty(this,"enabled",{get:function(){return this._initialized&&this._enabled},set:function(e){this._enabled=e}}),Object.defineProperty(this,"isAvailable",{get:function(){return this._initialized},set:function(e){throw new Error("The property isAvailable on the LocalStorage object is read-only")}})};return n.prototype={clear:function(){if(this.isAvailable)try{localStorage.clear()}catch(e){this._initialized=!1}return this._initialized},get:function(t){if(!this.isAvailable)return null;try{return e(localStorage.getItem(t))}catch(e){return this._initialized=!1,null}},remove:function(e){if(this.isAvailable)try{localStorage.removeItem(e)}catch(e){this._initialized=!1}return this._initialized},set:function(e,n){if(!this.isAvailable)return!1;if(null==n)return this.remove(e);try{localStorage.setItem(e,t(n))}catch(e){this._initialized=!1}return this._initialized},testAvailability:function(){var e="__lsp__";try{localStorage.setItem(e,e),this._initialized=localStorage.getItem(e)===e,localStorage.removeItem(e)}catch(e){this._initialized=!1}return this._initialized}},n}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("Filter",["Intermediary","LocalStorage"],t):"object"==typeof exports?module.exports=t(require("Intermediary"),require("LocalStorage")):e.Filter=t(e.Intermediary,e.LocalStorage)}(this,function(e,t){"use strict";function n(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function i(e,t){var i={};return t=null!=t?t:r.options,n(t,function(e,t){i[e]=t}),n(e,function(e,t){void 0!==i[e]&&(i[e]=t)}),i}var r=function(e,t,n){this._element=e,this._options=i(t),this._options=i(n,this._options),this._consent=!1};return r.options={filter:{},storageKey:""},r.prototype={_onBeforeUnload:function(e){var n=new t;this._consent?n.isAvailable&&n.set(this._options.storageKey,this.getFilter(!0)):n.isAvailable&&n.remove(this._options.storageKey)},_onClickHandler:function(t){var n=t.target;"input"===n.tagName.toLowerCase()&&(n.hasAttribute("data-filter-value")?(this._options.filter[n.getAttribute("data-filter-value")]=n.checked,e.publish("filter:filter-changed",{sender:this._options.storageKey})):n.hasAttribute("data-consent")&&(this._consent=n.checked,e.publish("filter:consent-changed",{sender:this._options.storageKey})))},_onConsentChanged:function(e){if(e.sender!==this._options.storageKey){this._consent=!this._consent;var t=this._element.querySelector("[data-consent]");null!=t&&(t.checked=this._consent)}},attachClickHandler:function(){null!=this._element&&(this._element.addEventListener("click",this._onClickHandler.bind(this)),e.subscribe("filter:consent-changed",this._onConsentChanged,this))},attachOnBeforeUnload:function(){window.addEventListener("beforeunload",this._onBeforeUnload.bind(this))},getFilter:function(e){if(e){var t={};return n(this._options.filter,function(e,n){n&&(t[e]=!0)}),t}return this._options.filter},getFilterFromStorage:function(){var e=new t;if(e.isAvailable){var n=e.get(this._options.storageKey);null!=n&&(this._options.filter=n,this._consent=!0)}if(this._consent){var i=this._element.querySelector("[data-consent]");null!=i&&(i.checked=this._consent)}}},r}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("BrowserFilter",["Filter"],t):"object"==typeof exports?module.exports=t(require("Filter")):e.BrowserFilter=t(e.Filter)}(this,function(e){"use strict";function t(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function n(e){var n=[];return t(e,function(e,t){n.push({key:e,title:t.browser.toLowerCase()})}),n.sort(function(e,t){return e.title<t.title?-1:e.title>t.title?1:0}),n}function i(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function r(e,t,n,r){var o=document.getElementById("bf-desktop"),s=document.getElementById("bf-mobile");if(null!=o&&null!=s){i(o),i(s);for(var a=0,l=n.length;a<l;a++){var u=n[a].key,c=t[u],d=document.createElement("li"),f=document.createElement("input"),p=document.createElement("label"),h=document.createTextNode(c.browser);f.setAttribute("id","chkbox_bf_"+u),f.setAttribute("type","checkbox"),f.setAttribute("data-filter-value",u),r.filter[u]?f.checked=!0:r.filter[void 0===u]&&(r.filter[u]=!1),p.setAttribute("for","chkbox_bf_"+u),p.classList.add("toggle-button"),d.appendChild(f),p.appendChild(h),d.appendChild(p),"mobile"===c.type?s.appendChild(d):o.appendChild(d)}}}var o=function(t,n){e.call(this,t,o.options,n)};return o.prototype=Object.create(e.prototype),o.options={filter:{and_ch:!0,and_ff:!0,and_uc:!0,chrome:!0,edge:!0,firefox:!0,ie:!0,ios_saf:!0,op_mini:!0,opera:!0,safari:!0},storageKey:"jscc-browser-filter"},o.prototype.init=function(e){if(null!=this._element){this.attachOnBeforeUnload(),this.attachClickHandler(),this.getFilterFromStorage();var t=n(e);r(this._element,e,t,this._options)}},o}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("ShowHide",[],t):"object"==typeof exports?module.exports=t():e.ShowHide=t()}(this,function(){"use strict";function e(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function t(t){var n={};return e(f.options,function(e,t){n[e]=t}),e(t,function(e,t){void 0!==n[e]&&(n[e]=t)}),n}function n(){var e,t=document.createElement("div"),n={WebkitTransition:"webkitTransitionEnd",OTransition:"otransitionend",MozTransition:"transitionend",transition:"transitionend"};for(e in n)if(n.hasOwnProperty(e)&&void 0!==t.style[e])return n[e];return d}function i(e,t){var n=document.querySelector("["+u.attrContainer+'="'+e+'"]'),i=document.querySelector("["+u.attrTrigger+'="'+e+'"]'),o=!t&&u.transitionEnd!==d;if(null!=n&&null!=i){if(n.classList.remove(u.cssOpened),n.classList.add(u.cssClosed),i.hasAttribute("data-sh-text-closed")){var a=document.createTextNode(i.getAttribute("data-sh-text-closed"));i.textContent=a.textContent}i.classList.remove(u.cssActiveTrigger),n.classList.remove(u.cssTransition),c&&o?(n.addEventListener(u.transitionEnd,s),n.style.maxHeight=n.offsetHeight+"px",setTimeout(function(){n.classList.add(u.cssTransition),n.style.maxHeight=r(n)+"px"},10)):(n.style.maxHeight=r(n)+"px",setTimeout(function(){u.transitionEnd===d?l(n):n.classList.add(u.cssTransition)},10))}}function r(e){var t,n=e.querySelector("["+u.attrTrigger+"]"),i=0;if(t=window.getComputedStyle(e),null!=n){for(;n.parentNode!==e;)n=n.parentNode;t=window.getComputedStyle(n),"absolute"!==t.position&&(i+=n.offsetHeight,i+=parseInt(t["margin-bottom"],10)+parseInt(t["margin-top"],10))}return t=window.getComputedStyle(e),"border-box"===t["box-sizing"]&&(i+=parseInt(t["border-bottom-width"],10)+parseInt(t["border-top-width"],10)),i}function o(e){var t=e.target,n=t.getAttribute(u.attrTrigger),r=document.querySelector("["+u.attrContainer+'="'+n+'"]');if(null!=r)if(r.classList.contains(u.cssClosed)){if(a(n),t.hasAttribute("data-sh-group"))for(var o=document.querySelectorAll('[data-sh-group="'+t.getAttribute("data-sh-group")+'"]'),s=0,l=o.length;s<l;s++){var c=o[s];if(c!==t){var d=document.querySelector("["+u.attrContainer+'="'+c.getAttribute(u.attrTrigger)+'"]');if(d.classList.contains(u.cssOpened)){i(c.getAttribute(u.attrTrigger));break}}}}else i(n)}function s(e){var t=e.currentTarget;t.removeEventListener(u.transitionEnd,s),l(t)}function a(e,t){var n=document.querySelector("["+u.attrContainer+'="'+e+'"]'),i=n.querySelector("["+u.attrContent+"]"),o=document.querySelector("["+u.attrTrigger+'="'+e+'"]'),a=!t&&u.transitionEnd!==d;if(null!=n&&null!=i&&null!=o){if(t=void 0!==t&&t,n.classList.remove(u.cssClosed),n.classList.add(u.cssOpened),o.hasAttribute("data-sh-text-opened")){var c=document.createTextNode(o.getAttribute("data-sh-text-opened"));o.textContent=c.textContent}o.classList.add(u.cssActiveTrigger),n.classList.remove(u.cssTransition),i.style.display="block",n.style.maxHeight=r(n)+"px",setTimeout(function(){a&&(n.addEventListener(u.transitionEnd,s),n.classList.add(u.cssTransition)),n.style.maxHeight=i.offsetHeight+r(n)+"px",a||l(n)},10)}}function l(e){if(null!=e){if(e.classList.contains(u.cssClosed)){var t=e.querySelector("["+u.attrContent+"]");null!=t&&(t.style.display="none")}e.classList.contains(u.cssTransition)?(e.classList.remove(u.cssTransition),setTimeout(function(){e.style.removeProperty("max-height"),setTimeout(function(){e.classList.add(u.cssTransition)},10)},10)):e.style.removeProperty("max-height")}}var u,c=!1,d="no-transitions",f=function(e){u=t(e),u.transitionEnd=n()};return f.options={attrContent:"data-sh-content",attrContainer:"data-sh-container",attrOpenOnInit:"data-sh-open",attrTrigger:"data-sh-trigger",cssActiveTrigger:"active-trigger",cssClosed:"closed",cssOpened:"opened",cssTransition:"transition"},f.prototype={hideDetailView:function(e,t){var n=document.querySelector("["+u.attrContainer+'="'+e+'"]');null==n||n.classList.contains(u.cssClosed)||i(e,t)},init:function(e,t){t=t||{};for(var n=document.querySelectorAll("["+u.attrTrigger+"]"),r=0,s=n.length;r<s;r++){var l=n[r],d=l.getAttribute(u.attrTrigger),f=document.querySelector("["+u.attrContainer+'="'+d+'"]');null!=f&&(l.addEventListener("click",o),"1"===f.getAttribute(u.attrOpenOnInit)?(f.removeAttribute(u.attrOpenOnInit),a(d,!0)):i(d,!0),null!=e&&e.call(t,{id:d}))}c=!0,document.documentElement.classList.remove("no-read-more")},replaceTrigger:function(e,t){if(null!=t&&t.hasAttribute(u.attrTrigger)){var n=document.querySelector("["+u.attrTrigger+'="'+e+'"]');null!=n&&null!=t&&(n.removeEventListener("click",o),t.addEventListener("click",o),n.parentNode.replaceChild(t,n),n=null)}},showDetailView:function(e,t){var n=document.querySelector("["+u.attrContainer+'="'+e+'"]');null==n||n.classList.contains(u.cssOpened)||a(e,t)}},f}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("ScrollTo",[],t):"object"==typeof exports?module.exports=t():e.ScrollTo=t()}(this,function(){"use strict";function e(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function t(t){var n={};return e(g.options,function(e,t){n[e]=t}),e(t,function(e,t){void 0!==n[e]&&(n[e]=t)}),n}function n(){window.scrollTo(0,r(p,m,f,h.maxIterations)),p++,p<=h.maxIterations&&b(function(){n()})}function i(){for(var e,t=document.querySelectorAll('a[href^="#"]'),n=0,i=t.length;n<i;n++)e=t[n],e.hasAttribute(h.attrIgnoreAnchor)||e.addEventListener("click",l)}function r(e,t,n,i){return n*(Math.pow(e/i-1,3)+1)+t}function o(){var e=(document.documentElement||document.body).scrollHeight,t=(document.documentElement||document.body).offsetHeight,n=(document.documentElement||document.body).clientHeight;return Math.max(e,t,n)}function s(){return(document.documentElement||document.body).clientHeight}function a(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}function l(e){var t=e.currentTarget?e.currentTarget:e.srcElement;if(null!=t){var n=document.querySelector(t.getAttribute("href"));if(null!=n){var i=0;t.hasAttribute("data-no-correction")||(i=h.correction),setTimeout(function(){c(a(),n.getBoundingClientRect().top+i)},10),e.preventDefault()}}}function u(e){if(d){var t=s();a()>t/h.topThresholdRatio?d.classList.remove(h.cssScrollTopDisabled):d.classList.add(h.cssScrollTopDisabled)}}function c(e,t){var i=o()-s(),r=e+t;r>i?t=i-e:r<0&&(t=-e),m=e,f=t,p=0,n()}var d,f,p,h,m,g=function(e){h=t(e)};g.options={attrIgnoreAnchor:"data-scrolltop-ignore",correction:0,cssScrollTopDisabled:"not-available",maxIterations:50,queryScrollTop:".scroll-to-top",topThresholdRatio:3};var b=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};return g.prototype={init:function(){d=document.querySelector(h.queryScrollTop),d&&window.addEventListener("scroll",u),i()},scrollToElement:function(e){c(a(),e.getBoundingClientRect().top)}},g}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("StickyHeader",[],t):"object"==typeof exports?module.exports=t():e.StickyHeader=t()}(this,function(){"use strict";function e(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function t(t){var n={};return e(i.options,function(e,t){n[e]=t}),e(t,function(e,t){void 0!==n[e]&&(n[e]=t)}),n}var n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},i=function(e,n){this._element=e,this._options=t(n),this._isFixed=!1};return i.options={cssFixed:"fixed",queryHeader:"#widget-report-header"},i.prototype={_checkElementPosition:function(){var e=this._element.getBoundingClientRect();e.top<0&&!this._isFixed?(this._isFixed=!0,this._header.classList.add(this._options.cssFixed)):e.top>=0&&this._isFixed&&(this._isFixed=!1,this._header.classList.remove(this._options.cssFixed))},_onScrollWindow:function(e){n(this.checkHandler)},init:function(){this._header=document.querySelector(this._options.queryHeader),null!=this._element&&null!=this._header&&(this.checkHandler=this._checkElementPosition.bind(this),window.addEventListener("scroll",this._onScrollWindow.bind(this)),this._checkElementPosition())}},i}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("SupportFilter",["Filter"],t):"object"==typeof exports?module.exports=t(require("Filter")):e.SupportFilter=t(e.Filter)}(this,function(e){"use strict";function t(e,t,n){var i=document.getElementById("support-filter");if(null!=i)for(var r=0,o=n.length;r<o;r++)if(t.filter[n[r]]){var s=e.querySelector('[data-filter-value="'+n[r]+'"]');null!=s&&(s.checked=!0)}else t.filter[n[r]]=!1}var n=function(t,i){e.call(this,t,n.options,i),this._keys=["u","n","a","p","y"]};return n.prototype=Object.create(e.prototype),n.options={filter:{u:!0,n:!0,a:!0,p:!0,y:!0},storageKey:"jscc-support-filter"},n.prototype.init=function(){null!=this._element&&(this.attachOnBeforeUnload(),this.attachClickHandler(),this.getFilterFromStorage(),t(this._element,this._options,this._keys))},n}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("Ajax",["Intermediary"],t):"object"==typeof exports?module.exports=t(require("Intermediary")):e.Ajax=t(e.Intermediary)}(this,function(e){"use strict";function t(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function n(e){var n={};return t(o.options,function(e,t){n[e]=t}),t(e,function(e,t){void 0!==n[e]&&(n[e]=t)}),n}function i(e){null!=e&&clearTimeout(e)}function r(e,t,n){null!=t&&"function"==typeof t&&t.call({},{error:e,url:n})}var o=function(e){this._options=n(e)};return o.options={callbackOnError:null,callbackOnSuccess:null,timeout:5e3},o.prototype={_onError:function(){this._clearTimeout(this._timeoutId),r(event.target.status,this._options.callbackOnError,this._url)},_onLoad:function(){i(this._timeoutId);var e;if(this._request.status>=200&&this._request.status<400&&this._options.callbackOnSuccess){var t=this._request.getResponseHeader("Content-Type"),n=/json/gi;if(n.test(t))try{e=JSON.parse(this._request.response)}catch(t){e=this._request.responseText}else e=this._request.responseText;this._options.callbackOnSuccess.call({},{url:this._url,result:e})}},onTimeout:function(){this._request.readyState<4&&this._request.abort(),this._timeoutId=null},makeRequest:function(e){this._url=e,this._request=new XMLHttpRequest,this._request.open("GET",e,!0),this._request.addEventListener("load",this._onLoad.bind(this)),this._request.addEventListener("error",this._onError.bind(this)),this._timeoutId=setTimeout(this._onTimeout,this._options.timeout),this._request.send()}},o}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("AjaxLoader",["Intermediary","Ajax"],t):"object"==typeof exports?module.exports=t(require("Intermediary"),require("Ajax")):e.AjaxLoader=t(e.Intermediary,e.Ajax)}(this,function(e,t){"use strict";function n(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var i=function(e){this._options=e,this._attempts=0,this._callCount=0,this._isReady=!1};return i.prototype={_loadData:function(){var i=this;this._isReady=!1,this._attempts++,n(this._sources,function(n){if(null==i._sources[n]){i._callCount++;var r=new t({callbackOnSuccess:i._onAjaxSuccess.bind(i),callbackOnError:i._onAjaxError.bind(i)});e.publish("notification:info",{level:9,message:'Downloading compatibility data from "'+n+'" (attempt '+i._attempts+")."}),r.makeRequest(n)}})},_onAjaxError:function(t){this._callCount--,e.publish("dataloader:download-failed",{level:1,message:"Unable to download compatibility data from ("+t.url+")",error:t}),this._onCallCompleted()},_onAjaxSuccess:function(t){e.publish("notification:info",{level:9,message:'Compatibility data from "'+t.url+'" downloaded.'}),this._callCount--,this._sources[t.url]=t.result,this._onCallCompleted()},_onCallCompleted:function(){if(0===this._callCount){var t=!1;n(this._sources,function(e,n){null==n&&(t=!0)}),t?this._attempts<5?this._loadData():e.publish("dataloader:too-many-attempts"):(this._isReady=!0,e.publish("dataloader:download-completed",{level:9,message:"Compatibility data successfully downloaded"}))}},getData:function(){return this._sources},isReady:function(){return this._isReady},loadData:function(e){this._isReady=!1,this._sources=e,this._attempts=0,this._loadData()}},i}),requirejs.config({paths:{Intermediary:"vendor/Intermediary"}}),requirejs(["Intermediary","CodeInput","CodeAnalyzer","Reporter","DataStore","BrowserFilter","ShowHide","ScrollTo","StickyHeader","SupportFilter","AjaxLoader"],function(e,t,n,i,r,o,s,a,l,u,c){"use strict";function d(e){var t=document.createElement("li"),n=new Date;t.textContent=("0"+n.getHours()).substr(-2)+":"+("0"+n.getMinutes()).substr(-2)+":"+("0"+n.getSeconds()).substr(-2)+"."+("00"+n.getMilliseconds()).substr(-3)+" - "+e,F.insertBefore(t,F.firstChild)}function f(e,t){if("notification:clear"===t)for(;F.firstChild;)F.removeChild(F.firstChild);else d(e.message)}function p(t){null==w&&(w=new n),r.isReady()?w.check(t.jsCode):(A=t.jsCode,C=new c,L=e.subscribe("dataloader",m),C.loadData(M))}function h(e){d("Code analysis completed"),v(),null==q&&(q=new s,q.init()),null==k&&(k=new l(document.getElementById("report")),k.init());var t=document.getElementById("widget-report");E=new i(document.getElementById("report-output"),{showFullySupported:!1},r.getAgents()),E.buildReport(w.getMatches(),S.getFilter()),E.filterSupportSections(T.getFilter()),t.classList.remove("hidden"),_=new a(I),_.init(),_.scrollToElement(document.getElementById("report"))}function m(t,n){var i=!1;switch(n){case"dataloader:download-completed":r.init(C.getData()),w.check(A),A=null,i=!0;break;case"dataloader:too-many-attempts":d("Exhausted compatibility data download attempts. ("+n+")"),i=!0;break;default:d("Unable to download necessary data for analysis. ("+n+")")}i&&(e.unsubscribe("dataloader",L),L=null,C=null)}function g(e){switch(e.sender){case"jscc-browser-filter":E.filterBrowsers(S.getFilter());break;case"jscc-support-filter":E.filterSupportSections(T.getFilter())}}function b(e){"A"===e.target.nodeName.toUpperCase()&&q.hideDetailView("index",!0)}function v(){null==S&&(S=new o(document.getElementById("browser-filter")),S.init(r.getAgents())),null==T&&(T=new u(document.getElementById("support-filter")),T.init())}function y(){if(null==document.createElement("input").placeholder)for(var e=document.querySelectorAll("label > span"),t=0,n=e.length;t<n;t++)e[t].classList.remove("visually-hidden")}function x(){O.init(),e.subscribe("codeinput:ready",p),null!=F&&e.subscribe("notification",f),_=new a(I),_.init();var t=document.getElementById("index-list");null!=t&&t.addEventListener("click",b),e.subscribe("codeAnalyzed",h),e.subscribe("filter:filter-changed",g),y(),d("Reporting for duty")}var _,w,C,S,E,k,q,T,L,A,j=document.getElementById("code-input"),O=new t(j),F=document.querySelector(".notifications"),I={correction:-88,topThresholdRatio:2},M={"/data/additional.json":null,"/data/caniuse2.json":null};x()}),define("app",function(){});